# RooCode System Interaction Protocols
# Standard: YAML, English, Low-Token, Strict

schemas:
  # Orchestrator -> Worker (Instruction)
  DispatchObject:
    id: str        # Task UUID
    mode: str      # Target mode slug (e.g., "code")
    goal: str      # Concise objective
    ctx: [str]     # Essential context & constraints
    reqs: [str]    # Acceptance criteria (Must pass)
    scope:
      read: [str]  # File paths allowed to read
      edit: [str]  # File paths allowed to edit
    retry:         # (Optional) Retry configuration
      limit: int   # Max retry attempts
      delay: int   # Delay between retries in seconds

  # Worker -> Orchestrator (Report)
  ResultObject:
    ref: str       # Refers to DispatchObject.id
    status: "OK" | "NG" | "BLOCK" | "ERROR"
    artifacts:     # Created or modified files
      - path: str
        type: "new" | "mod" | "del"
    log: str       # Concise summary of execution
    err:           # Error details if status != OK
      code: str    # Machine-readable error code (e.g., MALFORMED_YAML, PERMISSION_DENIED)
      msg: str     # Human-readable error message
      retryable: bool # Whether the Orchestrator should attempt a retry

  # Platform Maintainer -> PM (Audit)
  AuditReport:
    target: str    # Audit target path or scope
    verdict: "PASS" | "FAIL" | "WARN"
    findings:      # List of issues found
      - type: "struct" | "content" | "rule"
        msg: str   # Description of the issue
    fix: str|null  # Recommended fix (if any)
